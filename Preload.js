function Preload(){Phaser.State.call(this);}
var proto=Object.create(Phaser.State);Preload.prototype=proto;Preload.prototype.preload=function()
{this.game.load.audio('sfxAtlas',[serverPath+'assets/audios/fxAudio3.ogg',serverPath+'assets/audios/fxAudio3.mp3']);this.game.load.audio('voiceAtlas',[serverPath+'assets/audios/voiceAudioSp.ogg',serverPath+'assets/audios/voiceAudioSp.mp3']);this.loading=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,'loading');this.loading.anchor.set(0.5);this.loading.scale.set(0.6);this.loading.animations.add('loading',null,12,true);this.loading.animations.play('loading');var fontSize=62*assetScale;var style={font:fontSize+'px '+'Chelsea Market',fill:'#FFFFFF',align:'left'};this.textLoading=this.game.add.text(0,(350*assetScale),"CARGANDO.. 0%",style);this.textLoading.anchor.set(0.5);this.loading.addChild(this.textLoading);}
Preload.prototype.create=function(){this.load.onFileComplete.add(this.fileComplete,this);this.load.onLoadComplete.add(this.loadComplete,this);this.folder=serverPath+"assets/images/"+screen.size;this.start();};Preload.prototype.start=function(){this.game.load.atlas('assets',this.folder+'/game4.png',this.folder+'/game4.json',Phaser.Loader.TEXTURE_ATLAS_JSON_ARRAY);this.game.load.image('background',this.folder+'/background.png');soundManager=new SoundManager(this.game);this.load.start();};Preload.prototype.fileComplete=function(progress,cacheKey,success,totalLoaded,totalFiles){this.textLoading.setText("CARGANDO.. "+parseInt(progress)+"%");};Preload.prototype.loadComplete=function(){maxAmountOfBubbles=assetScale*maxAmountOfBubbles;this.textLoading.setText("CARGANDO.. 100%");this.game.sound.setDecodedCallback([sfxAtlas,voiceAtlas,backgroundMusic],function(){this.game.state.start("Menu");},this);};